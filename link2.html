<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Fitness Titanium Kiosk web page</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<!--<script src="https://d3js.org/d3.v5.min.js"></script>-->
		<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
		
		
		
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

		<style>
			html, body { 
				/* min-height: 100%; */
				background-color: black;
				color: white;
			}
			
			.imageClass {
				max-width: 15%; 
				height: auto; 
			}
						
			
		</style>
	</head>
	<body>
		<div class="w3-container w3-black" style="text-align: center; ">
			<img height="10%" width="10%" style="margin: 5px;" src="https://www.fitnesstitanium.bg/wp-content/uploads/2019/09/logo-light-new.png" alt="Light Logo"/>
		</div>

		<div class="w3-block" style="text-align:center;">						
			<a class="w3-button w3-round-large w3-hover-blue" href="/">
				<h2>Back</h2>				
			</a>						
		</div>
		
		<div id="csv-display" class="w3-container">
		</div>
		
		
		
		<script>
		
		function generateHtmlTable(data) {
    var html = '<table  class="w3-table w3-border w3-bordered">';

      if(typeof(data[0]) === 'undefined') {
        return null;
      } else {
		$.each(data, function( index, row ) {
		  //bind header
		  if(index == 0) {
			html += '<thead>';
			html += '<tr>';
			$.each(row, function( index, colData ) {
			if (index == 3) {
				html += '<th class="w3-center">';
			} else {
				html += '<th>';
			}				
			html += colData;
			html += '</th>';
			});
			
			html += '</tr>';
			html += '</thead>';
			html += '<tbody>';
		  } else {
			html += '<tr>';
			$.each(row, function( index, colData ) {
				
				if (index == 3) {
					html += '<td class="w3-center">';				
					html += '<img class="imageClass" src="' + colData + '"></img>';
				} else {
					html += '<td>';				
					html += colData;
				}				
				html += '</td>';
			});
			html += '</tr>';
		  }
		});
		html += '</tbody>';
		html += '</table>';		
		$('#csv-display').append(html);
	  }
	}	
		
		
		
		var theUrl = "https://cors-anywhere.herokuapp.com/https://docs.google.com/spreadsheets/d/e/2PACX-1vS6YPXjxdO9BfvANRqyFD-AKDHfE96maFSHjvbcn3Vz1JyI5gmYtBaOHk0Zmrly-8JL4YF7vC4jAklr/pub?output=csv";
		
			$.ajax({
	  type: "GET",  
	  url: theUrl,
	  dataType: "text",       
	  success: function(response)  
	  {
		data = $.csv.toArrays(response);
		console.log(data);
		generateHtmlTable(data);
	  }   
	});
	
		/*
		d3.csv(theUrl, function(data){
			console.log(data);
		});
		*/
		
		</script>
		
	</body>
</html> 
